<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>LEXIMAX</title>
    
    <style>
        /* General Reset and Global Styles */
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        /* Game Wrapper */
        .game-wrapper {
            width: 100%;
            max-width: 320px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        /* Title Styling */
        #leximax-title {
            display: flex;
            gap: 0;
            margin-bottom: 8px;
        }

        .title-block {
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 35px;
            font-weight: bold;
            color: white;
        }

        /* Target Word */
        #target-word-container {
            text-align: center;
            margin-bottom: 8px;
        }

        #target-word-label {
            font-size: 22px;
            margin-bottom: 4px;
            font-weight: bold;
            color: #666666;
        }

        #target-word {
            display: flex;
            gap: 1px;
            justify-content: center;
            background-color: white;
            padding: 1px;
            border: 1px solid #004d40;
        }

        .target-letter {
            width: 25px;
            height: 25px;
            background-color: #004d40;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 16px;
        }

        /* Game Grid */
        #game-grid {
            width: 100%;
            aspect-ratio: 8/10;
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 1px;
            border: 1px solid #004d40;
        }

        .grid-cell {
            background-color: #004d40;
            width: 100%;
            height: 100%;
        }

        .grid-cell.filled {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            font-size: 16px;
        }

        /* Controls */
        #mobile-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .mobile-btn {
            aspect-ratio: 1;
            background-color: #003366;
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 45px;
        }

        #time-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }

        .time-container {
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        #timer-container {
            background-color: #004d40;
        }

        #best-time-container {
            background-color: #d32f2f;
        }

        /* Leaderboard */
        #leaderboard {
            width: 100%;
            max-width: 320px;
            border-collapse: collapse;
            background-color: #f0f0f0;
        }

        #leaderboard caption {
            background-color: #003366;
            color: white;
            font-weight: bold;
        }

        #leaderboard th, #leaderboard td {
            padding: 6px 12px;
            text-align: left;
            border-bottom: 1px solid #cccccc;
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <div id="leximax-title">
            <div class="title-block" style="background-color: #2196f3;">L</div>
            <div class="title-block" style="background-color: #f44336;">E</div>
            <div class="title-block" style="background-color: #4caf50;">X</div>
            <div class="title-block" style="background-color: #ffc107;">I</div>
            <div class="title-block" style="background-color: #9c27b0;">M</div>
            <div class="title-block" style="background-color: #0066FF;">A</div>
            <div class="title-block" style="background-color: #900C3F;">X</div>
        </div>

        <div id="target-word-container">
            <div id="target-word-label">TARGET WORD:</div>
            <div id="target-word"></div>
        </div>

        <div id="game-grid"></div>

        <div id="mobile-controls">
            <button class="mobile-btn" id="left-btn">◀</button>
            <button class="mobile-btn" id="down-btn">▼</button>
            <button class="mobile-btn" id="right-btn">▶</button>
        </div>

        <div id="time-display">
            <div id="timer-container" class="time-container">Time:<br>00:00</div>
            <div id="best-time-container" class="time-container">Best Time:<br>--:--</div>
        </div>
    </div>

    <table id="leaderboard">
        <caption>LEADERBOARD</caption>
        <thead>
            <tr><th>Rank</th><th>Name</th><th>Time</th></tr>
        </thead>
        <tbody></tbody>
    </table>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { getFirestore, doc, getDoc, collection, addDoc, query, orderBy, limit, onSnapshot } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";

        const firebaseConfig = { /* Firebase Config Here */ };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const GAME_ID = new URLSearchParams(window.location.search).get('gameId');
        let TARGET_WORD = '';

        document.addEventListener('DOMContentLoaded', async () => {
            const gameRef = doc(db, 'daily_games', GAME_ID);
            const gameSnap = await getDoc(gameRef);

            TARGET_WORD = gameSnap.data()?.targetWord || 'ERROR';
            document.getElementById('target-word').innerHTML = TARGET_WORD.split('').map(letter => `<div class="target-letter">${letter}</div>`).join('');
        });

        function dropBlock() {
            console.log("Block dropped!");
        }
    </script>
</body>
</html>
