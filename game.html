<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>LEXIMAX</title>
    
    <style>
        /* ✅ Global Styles */
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        /* ✅ Game Wrapper */
        .game-wrapper {
            width: 100%;
            max-width: 320px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        /* ✅ Title Styling */
        #leximax-title {
            display: flex;
            gap: 0;
            margin-bottom: 8px;
        }

        .title-block {
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 35px;
            font-weight: bold;
            color: white;
        }

        /* ✅ Target Word */
        #target-word-container {
            text-align: center;
            margin-bottom: 8px;
        }

        #target-word-label {
            font-size: 22px;
            margin-bottom: 4px;
            font-weight: bold;
            color: #666666;
        }

        #target-word {
            display: flex;
            gap: 1px;
            justify-content: center;
            background-color: white;
            padding: 1px;
            border: 1px solid #004d40;
        }

        .target-letter {
            width: 25px;
            height: 25px;
            background-color: #004d40;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 16px;
        }

        /* ✅ Game Grid */
        #game-grid {
            width: 100%;
            aspect-ratio: 8/10;
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 1px;
            border: 1px solid #004d40;
        }

        .grid-cell {
            background-color: #004d40;
            width: 100%;
            height: 100%;
        }

        .grid-cell.filled {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            font-size: 16px;
        }

        /* ✅ Controls */
        #mobile-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .mobile-btn {
            aspect-ratio: 1;
            background-color: #003366;
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 45px;
        }

        #time-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }

        .time-container {
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        #timer-container {
            background-color: #004d40;
        }

        #best-time-container {
            background-color: #d32f2f;
        }

        /* ✅ Leaderboard */
        #leaderboard {
            width: 100%;
            max-width: 320px;
            border-collapse: collapse;
            background-color: #f0f0f0;
        }

        #leaderboard caption {
            background-color: #003366;
            color: white;
            font-weight: bold;
        }

        #leaderboard th, #leaderboard td {
            padding: 6px 12px;
            text-align: left;
            border-bottom: 1px solid #cccccc;
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <div id="leximax-title">
            <div class="title-block" style="background-color: #2196f3;">L</div>
            <div class="title-block" style="background-color: #f44336;">E</div>
            <div class="title-block" style="background-color: #4caf50;">X</div>
            <div class="title-block" style="background-color: #ffc107;">I</div>
            <div class="title-block" style="background-color: #9c27b0;">M</div>
            <div class="title-block" style="background-color: #0066FF;">A</div>
            <div class="title-block" style="background-color: #900C3F;">X</div>
        </div>

        <div id="target-word-container">
            <div id="target-word-label">TARGET WORD:</div>
            <div id="target-word"></div>
        </div>

        <div id="game-grid"></div>
        <div id="mobile-controls">
            <button class="mobile-btn" id="left-btn">◀</button>
            <button class="mobile-btn" id="down-btn">▼</button>
            <button class="mobile-btn" id="right-btn">▶</button>
        </div>
        <!-- ✅ Time Display -->
        <div id="time-display">
            <div id="timer-container" class="time-container">Time:<br>00:00</div>
            <div id="best-time-container" class="time-container">Best Time:<br>--:--</div>
        </div>

        <!-- ✅ Leaderboard -->
        <table id="leaderboard">
            <caption>LEADERBOARD</caption>
            <thead>
                <tr><th>Rank</th><th>Name</th><th>Time</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- ✅ Firebase and JavaScript Logic -->
    <script type="module">
        // ✅ Firebase Setup
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { 
            getFirestore, 
            doc, 
            getDoc, 
            collection, 
            addDoc, 
            query, 
            orderBy, 
            limit, 
            onSnapshot 
        } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";

        // ✅ Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC7MGy-7Gh5h1zp6KjuDq2_pRekPvCHrM4",
            authDomain: "leximax-96299.firebaseapp.com",
            projectId: "leximax-96299",
            storageBucket: "leximax-96299.appspot.com",
            messagingSenderId: "1067424610925",
            appId: "1:1067424610925:web:f2d344a474e9bad8b8dd64"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ✅ Core Game Variables
        const COLORS = ['#2196f3', '#f44336', '#4caf50', '#ffc107', '#9c27b0', '#003366', '#009688'];
        const LETTERS = 'BCDFGHJKLMNPQRSTVWXZ';
        const VOWELS = 'AEIOUY';

        let TARGET_WORD = '';
        let GAME_ID = '';
        let gameTime = 0;
        let isPaused = false;
        let isGameOver = false;
        let currentBlock = null;
        let nextBlock = null;
        let grid = [];
        let gameInterval = null;

        // ✅ Utility Functions
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // ✅ Fetch Game Data from Firebase
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                GAME_ID = urlParams.get('gameId');

                if (!GAME_ID) throw new Error('Game ID is missing from the URL.');

                const gameRef = doc(db, 'daily_games', GAME_ID);
                const gameSnap = await getDoc(gameRef);

                if (!gameSnap.exists()) {
                    throw new Error(`Game ${GAME_ID} not found.`);
                }

                TARGET_WORD = gameSnap.data()?.targetWord || 'ERROR';
                displayTargetWord(TARGET_WORD);

                // ✅ Start Leaderboard Listener
                setupLeaderboardListener();
                initGame();
            } catch (error) {
                console.error('Initialization Error:', error.message);
                document.body.innerHTML = `<h2 style="color: red; text-align: center; margin-top: 50px;">Error: ${error.message}</h2>`;
            }
        });

        // ✅ Display Target Word
        function displayTargetWord(word) {
            const targetWordContainer = document.getElementById('target-word');
            if (targetWordContainer) {
                targetWordContainer.innerHTML = word
                    .split('')
                    .map(letter => `<div class="target-letter">${letter}</div>`)
                    .join('');
            } else {
                console.error('Target word container not found.');
            }
        }

        // ✅ Setup Leaderboard Listener
        function setupLeaderboardListener() {
            const leaderboardQuery = query(
                collection(db, 'daily_games', GAME_ID, 'leaderboard'),
                orderBy("time"),
                limit(10)
            );

            onSnapshot(leaderboardQuery, (snapshot) => {
                const tbody = document.querySelector('#leaderboard tbody');
                tbody.innerHTML = '';
                let rank = 1;
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${rank++}</td>
                        <td>${data.name || 'Anonymous'}</td>
                        <td>${formatTime(data.time)}</td>
                    `;
                    tbody.appendChild(row);
                });
            });
        }

        // ✅ Initialize Game Grid
        function initGrid() {
            const gameGrid = document.getElementById('game-grid');
            gameGrid.innerHTML = '';
            grid = Array.from({ length: 10 }, () => Array(8).fill(null));

            for (let y = 0; y < 10; y++) {
                for (let x = 0; x < 8; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.setAttribute('data-x', x);
                    cell.setAttribute('data-y', y);
                    gameGrid.appendChild(cell);
                }
            }
        }

        // ✅ Start Timer
        function resetTimer() {
            clearInterval(gameInterval);
            gameTime = 0;
            document.querySelector('#timer-container').innerHTML = `Time:<br>00:00`;
            gameInterval = setInterval(() => {
                if (!isPaused && !isGameOver) {
                    gameTime++;
                    document.querySelector('#timer-container').innerHTML = `Time:<br>${formatTime(gameTime)}`;
                }
            }, 1000);
        }

        // ✅ Initialize Game
        function initGame() {
            initGrid();
            currentBlock = createBlock();
            nextBlock = createBlock();
            drawBlock(currentBlock);
            resetTimer();
        }

        // ✅ Create a New Block
        function createBlock() {
            const color = COLORS[Math.floor(Math.random() * COLORS.length)];
            const letter = Math.random() < 0.3 ?
                VOWELS[Math.floor(Math.random() * VOWELS.length)] :
                LETTERS[Math.floor(Math.random() * LETTERS.length)];
            return { color, letter, x: Math.floor(8 / 2), y: 0 };
        }

        // ✅ Draw a Block
        function drawBlock(block) {
            if (!block) return;
            const cell = document.querySelector(`#game-grid .grid-cell[data-x="${block.x}"][data-y="${block.y}"]`);
            if (cell) {
                cell.classList.add('filled');
                cell.style.backgroundColor = block.color;
                cell.textContent = block.letter;
            }
        }
    </script>
        <!-- ✅ Time Display -->
        <div id="time-display">
            <div id="timer-container" class="time-container">Time:<br>00:00</div>
            <div id="best-time-container" class="time-container">Best Time:<br>--:--</div>
        </div>

        <!-- ✅ Leaderboard -->
        <table id="leaderboard">
            <caption>LEADERBOARD</caption>
            <thead>
                <tr><th>Rank</th><th>Name</th><th>Time</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- ✅ Firebase and JavaScript Logic -->
    <script type="module">
        // ✅ Firebase Setup
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { 
            getFirestore, 
            doc, 
            getDoc, 
            collection, 
            addDoc, 
            query, 
            orderBy, 
            limit, 
            onSnapshot 
        } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";

        // ✅ Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC7MGy-7Gh5h1zp6KjuDq2_pRekPvCHrM4",
            authDomain: "leximax-96299.firebaseapp.com",
            projectId: "leximax-96299",
            storageBucket: "leximax-96299.appspot.com",
            messagingSenderId: "1067424610925",
            appId: "1:1067424610925:web:f2d344a474e9bad8b8dd64"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ✅ Core Game Variables
        const COLORS = ['#2196f3', '#f44336', '#4caf50', '#ffc107', '#9c27b0', '#003366', '#009688'];
        const LETTERS = 'BCDFGHJKLMNPQRSTVWXZ';
        const VOWELS = 'AEIOUY';

        let TARGET_WORD = '';
        let GAME_ID = '';
        let gameTime = 0;
        let isPaused = false;
        let isGameOver = false;
        let currentBlock = null;
        let nextBlock = null;
        let grid = [];
        let gameInterval = null;

        // ✅ Utility Functions
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // ✅ Fetch Game Data from Firebase
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                GAME_ID = urlParams.get('gameId');

                if (!GAME_ID) throw new Error('Game ID is missing from the URL.');

                const gameRef = doc(db, 'daily_games', GAME_ID);
                const gameSnap = await getDoc(gameRef);

                if (!gameSnap.exists()) {
                    throw new Error(`Game ${GAME_ID} not found.`);
                }

                TARGET_WORD = gameSnap.data()?.targetWord || 'ERROR';
                displayTargetWord(TARGET_WORD);

                // ✅ Start Leaderboard Listener
                setupLeaderboardListener();
                initGame();
            } catch (error) {
                console.error('Initialization Error:', error.message);
                document.body.innerHTML = `<h2 style="color: red; text-align: center; margin-top: 50px;">Error: ${error.message}</h2>`;
            }
        });

        // ✅ Display Target Word
        function displayTargetWord(word) {
            const targetWordContainer = document.getElementById('target-word');
            if (targetWordContainer) {
                targetWordContainer.innerHTML = word
                    .split('')
                    .map(letter => `<div class="target-letter">${letter}</div>`)
                    .join('');
            } else {
                console.error('Target word container not found.');
            }
        }

        // ✅ Setup Leaderboard Listener
        function setupLeaderboardListener() {
            const leaderboardQuery = query(
                collection(db, 'daily_games', GAME_ID, 'leaderboard'),
                orderBy("time"),
                limit(10)
            );

            onSnapshot(leaderboardQuery, (snapshot) => {
                const tbody = document.querySelector('#leaderboard tbody');
                tbody.innerHTML = '';
                let rank = 1;
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${rank++}</td>
                        <td>${data.name || 'Anonymous'}</td>
                        <td>${formatTime(data.time)}</td>
                    `;
                    tbody.appendChild(row);
                });
            });
        }

        // ✅ Initialize Game Grid
        function initGrid() {
            const gameGrid = document.getElementById('game-grid');
            gameGrid.innerHTML = '';
            grid = Array.from({ length: 10 }, () => Array(8).fill(null));

            for (let y = 0; y < 10; y++) {
                for (let x = 0; x < 8; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.setAttribute('data-x', x);
                    cell.setAttribute('data-y', y);
                    gameGrid.appendChild(cell);
                }
            }
        }

        // ✅ Start Timer
        function resetTimer() {
            clearInterval(gameInterval);
            gameTime = 0;
            document.querySelector('#timer-container').innerHTML = `Time:<br>00:00`;
            gameInterval = setInterval(() => {
                if (!isPaused && !isGameOver) {
                    gameTime++;
                    document.querySelector('#timer-container').innerHTML = `Time:<br>${formatTime(gameTime)}`;
                }
            }, 1000);
        }

        // ✅ Initialize Game
        function initGame() {
            initGrid();
            currentBlock = createBlock();
            nextBlock = createBlock();
            drawBlock(currentBlock);
            resetTimer();
        }

        // ✅ Create a New Block
        function createBlock() {
            const color = COLORS[Math.floor(Math.random() * COLORS.length)];
            const letter = Math.random() < 0.3 ?
                VOWELS[Math.floor(Math.random() * VOWELS.length)] :
                LETTERS[Math.floor(Math.random() * LETTERS.length)];
            return { color, letter, x: Math.floor(8 / 2), y: 0 };
        }

        // ✅ Draw a Block
        function drawBlock(block) {
            if (!block) return;
            const cell = document.querySelector(`#game-grid .grid-cell[data-x="${block.x}"][data-y="${block.y}"]`);
            if (cell) {
                cell.classList.add('filled');
                cell.style.backgroundColor = block.color;
                cell.textContent = block.letter;
            }
        }
    </script>
    <script type="module">
        // ✅ Restart Game
        function restartGame() {
            clearInterval(gameInterval);
            isGameOver = false;
            isPaused = false;
            gameTime = 0;

            initGrid();
            currentBlock = createBlock();
            nextBlock = createBlock();
            drawBlock(currentBlock);

            document.querySelector('#timer-container').innerHTML = 'Time:<br>00:00';
            document.querySelector('#pause-btn').textContent = 'PAUSE';

            gameInterval = setInterval(() => {
                if (!isPaused && !isGameOver) {
                    moveBlock(0, 1);
                    updateTimer();
                }
            }, 1000);
        }

        // ✅ Timer Update Function
        function updateTimer() {
            if (!isPaused && !isGameOver) {
                gameTime++;
                document.querySelector('#timer-container').innerHTML = `Time:<br>${formatTime(gameTime)}`;
            }
        }

        // ✅ Start Game Function
        function startGame() {
            const overlay = document.querySelector('div[style*="position: fixed"]');
            if (overlay) overlay.remove();

            clearInterval(gameInterval);
            isGameOver = false;
            isPaused = false;
            gameTime = 0;

            initGrid();
            currentBlock = createBlock();
            nextBlock = createBlock();
            drawBlock(currentBlock);

            document.querySelector('#timer-container').innerHTML = 'Time:<br>00:00';
            document.querySelector('#pause-btn').textContent = 'PAUSE';

            gameInterval = setInterval(() => {
                if (!isPaused && !isGameOver) {
                    moveBlock(0, 1);
                    updateTimer();
                }
            }, 1000);
        }

        // ✅ Pause and Resume Game
        function togglePause() {
            if (isGameOver) return;
            isPaused = !isPaused;
            document.querySelector('#pause-btn').textContent = isPaused ? 'RESUME' : 'PAUSE';
        }

        // ✅ Event Listeners Setup
        function setupEventListeners() {
            // ✅ Mobile Controls
            document.getElementById('left-btn')?.addEventListener('click', () => moveBlock(-1, 0));
            document.getElementById('right-btn')?.addEventListener('click', () => moveBlock(1, 0));
            document.getElementById('down-btn')?.addEventListener('click', dropBlock);

            // ✅ Keyboard Controls
            document.addEventListener('keydown', (e) => {
                if (isPaused || isGameOver) return;

                switch (e.key) {
                    case 'ArrowLeft':
                        moveBlock(-1, 0);
                        break;
                    case 'ArrowRight':
                        moveBlock(1, 0);
                        break;
                    case 'ArrowDown':
                        moveBlock(0, 1);
                        break;
                    case ' ':
                        e.preventDefault();
                        dropBlock();
                        break;
                }
            });

            // ✅ Game Control Buttons
            document.getElementById('start-btn')?.addEventListener('click', startGame);
            document.getElementById('pause-btn')?.addEventListener('click', togglePause);
        }

        // ✅ Final Safety Checks for Initialization
        window.addEventListener('error', (event) => {
            console.error('Global Error:', event.message);
        });

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // ✅ Extract GAME_ID from URL
                const urlParams = new URLSearchParams(window.location.search);
                GAME_ID = urlParams.get('gameId');

                if (!GAME_ID) throw new Error('Game ID is missing from the URL.');

                // ✅ Fetch Game Data from Firebase
                const gameRef = doc(db, 'daily_games', GAME_ID);
                const gameSnap = await getDoc(gameRef);

                if (!gameSnap.exists()) {
                    throw new Error(`Game ${GAME_ID} not found.`);
                }

                TARGET_WORD = gameSnap.data()?.targetWord || 'ERROR';
                displayTargetWord(TARGET_WORD);

                // ✅ Initialize Leaderboard
                setupLeaderboardListener();

                // ✅ Start Game
                initGame();
                setupEventListeners();

                console.log('%cGame Initialized Successfully!', 'color: green; font-weight: bold;');
            } catch (error) {
                console.error('Initialization Error:', error.message);
                document.body.innerHTML = `
                    <h2 style="color: red; text-align: center; margin-top: 50px;">
                        Error: ${error.message}
                    </h2>`;
            }
        });

        // ✅ Debug State (Optional)
        function debugGameState() {
            console.log('%cGame State Debug:', 'color: blue; font-weight: bold;');
            console.log('TARGET_WORD:', TARGET_WORD);
            console.log('GAME_ID:', GAME_ID);
            console.log('Game Time:', gameTime);
            console.log('Paused:', isPaused);
            console.log('Game Over:', isGameOver);
            console.log('Current Block:', currentBlock);
            console.log('Next Block:', nextBlock);
            console.log('Grid:', grid);
        }

        // ✅ Debug Button (For Testing Purposes)
        const debugButton = document.createElement('button');
        debugButton.innerText = 'Debug State';
        debugButton.style.position = 'fixed';
        debugButton.style.bottom = '10px';
        debugButton.style.right = '10px';
        debugButton.style.zIndex = '1000';
        debugButton.style.background = '#f44336';
        debugButton.style.color = 'white';
        debugButton.style.padding = '5px 10px';
        debugButton.style.border = 'none';
        debugButton.style.borderRadius = '4px';
        debugButton.style.cursor = 'pointer';

        debugButton.addEventListener('click', debugGameState);
        document.body.appendChild(debugButton);

        console.log('%cFinal Initialization Complete!', 'color: purple; font-weight: bold;');
    </script>
    <script type="module">
        // ✅ Final Safety Net for Unexpected Errors
        window.addEventListener('error', (event) => {
            console.error('Global Error:', event.message);
        });

        // ✅ Force Clean Initialization on Page Load
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // ✅ Extract GAME_ID from URL
                const urlParams = new URLSearchParams(window.location.search);
                GAME_ID = urlParams.get('gameId');

                if (!GAME_ID) throw new Error('Game ID is missing from the URL.');

                // ✅ Fetch Game Data from Firebase
                const gameRef = doc(db, 'daily_games', GAME_ID);
                const gameSnap = await getDoc(gameRef);

                if (!gameSnap.exists()) {
                    throw new Error(`Game ${GAME_ID} not found.`);
                }

                TARGET_WORD = gameSnap.data()?.targetWord || 'ERROR';
                displayTargetWord(TARGET_WORD);

                // ✅ Initialize Leaderboard
                setupLeaderboardListener();

                // ✅ Initialize Game Grid and Start Game
                initGame();
                setupEventListeners();

                console.log('%cGame Fully Initialized Successfully!', 'color: green; font-weight: bold;');
            } catch (error) {
                console.error('Initialization Error:', error.message);
                document.body.innerHTML = `
                    <h2 style="color: red; text-align: center; margin-top: 50px;">
                        Error: ${error.message}
                    </h2>`;
            }
        });

        // ✅ Debugging Utilities
        function debugGameState() {
            console.log('%cGame State Debug:', 'color: blue; font-weight: bold;');
            console.log('TARGET_WORD:', TARGET_WORD);
            console.log('GAME_ID:', GAME_ID);
            console.log('Game Time:', gameTime);
            console.log('Paused:', isPaused);
            console.log('Game Over:', isGameOver);
            console.log('Current Block:', currentBlock);
            console.log('Next Block:', nextBlock);
            console.log('Grid:', grid);
        }

        // ✅ Debug Button (Optional)
        const debugButton = document.createElement('button');
        debugButton.innerText = 'Debug State';
        debugButton.style.position = 'fixed';
        debugButton.style.bottom = '10px';
        debugButton.style.right = '10px';
        debugButton.style.zIndex = '1000';
        debugButton.style.background = '#f44336';
        debugButton.style.color = 'white';
        debugButton.style.padding = '5px 10px';
        debugButton.style.border = 'none';
        debugButton.style.borderRadius = '4px';
        debugButton.style.cursor = 'pointer';

        debugButton.addEventListener('click', debugGameState);
        document.body.appendChild(debugButton);

        // ✅ Handle Unresponsive Game States Gracefully
        function handleUnresponsiveState() {
            if (isGameOver || isPaused) return;
            console.warn('Game seems unresponsive. Restarting...');
            restartGame();
        }

        // ✅ Force Reload Button (For Testing Purposes)
        const reloadButton = document.createElement('button');
        reloadButton.innerText = 'Force Reload';
        reloadButton.style.position = 'fixed';
        reloadButton.style.bottom = '50px';
        reloadButton.style.right = '10px';
        reloadButton.style.zIndex = '1000';
        reloadButton.style.background = '#2196f3';
        reloadButton.style.color = 'white';
        reloadButton.style.padding = '5px 10px';
        reloadButton.style.border = 'none';
        reloadButton.style.borderRadius = '4px';
        reloadButton.style.cursor = 'pointer';

        reloadButton.addEventListener('click', () => {
            console.warn('Forcing Game Reload...');
            location.reload();
        });
        document.body.appendChild(reloadButton);

        // ✅ Confirm Clean Initialization
        console.log('%cFinal Initialization Complete!', 'color: purple; font-weight: bold;');
    </script>
</body>
</html>
